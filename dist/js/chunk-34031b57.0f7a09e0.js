(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34031b57"],{"6dcb":function(t,e,s){},"94a0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"messaging"},[s("div",{staticClass:"inbox_msg"},[s("div",{staticClass:"inbox_people"},[t._m(0),s("div",{staticClass:"inbox_chat"},t._l(t.contacts,(function(e){return s("div",{key:e,staticClass:"chat_list active_chat"},[s("div",{staticClass:"chat people"},[s("div",{staticClass:"chat_ib"},[s("v-btn",{staticClass:"mx-2",attrs:{depressed:"",color:"#F1BA79"},on:{click:function(s){t.select(e.name),t.fetchMessages()}}},[t._v(" Start messaging ")]),s("v-btn",{staticClass:"mx-2",style:{float:"right"},attrs:{depressed:"",color:"#F1BA79"},on:{click:t.addNew}},[t._v("Schedule session")]),s("h5",[t._v(t._s(e.name))])],1)])])})),0)]),s("div",{staticClass:"mesgs"},[s("div",{staticClass:"msg_history"},t._l(t.messages,(function(e){return s("div",{key:e,staticClass:"incoming_msg"},[s("div",{class:[e.author===t.authUser.email?"sent_msg":"received_msg"]},[s("div",{staticClass:"received_withd_msg"},[s("p",[t._v(" "+t._s(e.message))]),s("span",{staticClass:"time_date"},[t._v(t._s(e.createdAt.toDate().getMonth()+"/"+e.createdAt.toDate().getDate()+" "+e.createdAt.toDate().getHours()+":"+e.createdAt.toDate().getMinutes())+"||"+t._s(e.author))])])])])})),0),s("div",{staticClass:"type_msg"},[s("div",{staticClass:"input_msg_write"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"write_msg",attrs:{type:"text",placeholder:"Type a message"},domProps:{value:t.message},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._m(1)])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"module",tabindex:"-1",role:"dialog","aria-labelledby":"editLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(2),s("div",{staticClass:"modal-body"},[s("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("v-spacer"),s("v-time-picker",{model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" Close ")]),"new"==t.modal?s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addSession()}}},[t._v(" Save changes ")]):t._e(),"edit"==t.modal?s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateModule()}}},[t._v(" Apply changes ")]):t._e()])])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headind_srch"},[s("div",{staticClass:"recent_heading"},[s("h4",[t._v("Recent")])]),s("div",{staticClass:"srch_bar"},[s("div",{staticClass:"stylish-input-group"},[s("input",{staticClass:"search-bar",attrs:{type:"text",placeholder:"Search"}}),s("span",{staticClass:"input-group-addon"},[s("button",{attrs:{type:"button"}},[s("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"msg_send_btn",attrs:{type:"button"}},[s("i",{staticClass:"fa fa-paper-plane-o",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"editLabel"}},[t._v("Schedule a date!")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])}],n=s("8aa5"),c=s.n(n),o={name:"Chat",data:function(){return{message:null,messages:[],authUser:{},receipient:"",contacts:[],modal:null,date:(new Date).toISOString().substr(0,10),menu:!1,menu2:!1,time:new Date}},methods:{saveMessage:function(){var t=this;null!=this.message?db.collection("chat").add({message:this.message,author:this.authUser.email,createdAt:new Date,receipient:this.receipient,auth_rec:this.authUser.email.concat(this.receipient).length}).then((function(){t.scrollToBottom()})):alert("Enter message first"),this.message=null},fetchMessages:function(){var t=this;this.receipient?db.collection("chat").where("auth_rec","==",c.a.auth().currentUser.email.concat(this.receipient).length).orderBy("createdAt").onSnapshot((function(e){var s=[];e.forEach((function(t){s.push(t.data())})),t.messages=s,setTimeout((function(){t.scrollToBottom()}),1e3)})):console.log("no receipient")},fetchContacts:function(){var t=this;db.collection("users").doc(c.a.auth().currentUser.uid).collection("contacts").onSnapshot((function(e){var s=[];e.forEach((function(t){s.push(t.data())})),t.contacts=s}))},scrollToBottom:function(){var t=document.querySelector(".msg_history");t.scrollTop=t.scrollHeight},select:function(t){this.receipient=t},addNew:function(){this.modal="new",$("#module").modal("show")},addSession:function(){var t=this;db.collection("scheduledSessions").add({date:this.submittableDateTime}).then((function(){t.modal=null}))}},created:function(){var t=this;c.a.auth().onAuthStateChanged((function(e){t.authUser=e||{}})),this.fetchContacts()},computed:{submittableDateTime:function(){var t=new Date(this.date);if("string"===typeof this.time){var e=this.time.match(/^(\d+)/)[1],s=this.time.match(/:(\d+)/)[1];t.setHours(e),t.setMinutes(s)}else t.setHours(this.time.getHours()),t.setMinutes(this.time.getMinutes());return t}},beforeRouteEnter:function(t,e,s){s((function(t){c.a.auth().onAuthStateChanged((function(e){e?s():t.$router.push("/login")}))}))}},r=o,l=(s("b722"),s("2877")),d=Object(l["a"])(r,a,i,!1,null,"bc0946a4",null);e["default"]=d.exports},b722:function(t,e,s){"use strict";var a=s("6dcb"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-34031b57.0f7a09e0.js.map